¨
3D:\Dev\AspNetCoreTestes\SharedKernel\DomainEvent.cs
	namespace 	
SharedKernel
 
{ 
public 

static 
class 
DomainEvents $
{		 
[

 	
ThreadStatic

	 
]

 
private 
static 
List 
< 
Delegate $
>$ %
actions& -
;- .
static 
DomainEvents 
( 
) 
{ 	
	Container 
= 
ContainerFactory (
.( )
	Container) 2
;2 3
} 	
public 
static 
	Container 
	Container  )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
static 
void 
Register #
<# $
T$ %
>% &
(& '
Action' -
<- .
T. /
>/ 0
callback1 9
)9 :
where; @
TA B
:C D
IDomainEventE Q
{ 	
if 
( 
actions 
== 
null 
)  
{ 
actions 
= 
new 
List "
<" #
Delegate# +
>+ ,
(, -
)- .
;. /
} 
actions 
. 
Add 
( 
callback  
)  !
;! "
} 	
public 
static 
void 
ClearCallbacks )
() *
)* +
{ 	
actions 
= 
null 
; 
} 	
public!! 
static!! 
void!! 
Raise!!  
<!!  !
T!!! "
>!!" #
(!!# $
T!!$ %
args!!& *
)!!* +
where!!, 1
T!!2 3
:!!4 5
IDomainEvent!!6 B
{"" 	
foreach## 
(## 
var## 
handler##  
in##! #
	Container##$ -
.##- .
GetAllInstances##. =
<##= >
IHandle##> E
<##E F
T##F G
>##G H
>##H I
(##I J
)##J K
)##K L
{$$ 
handler%% 
.%% 
Handle%% 
(%% 
args%% #
)%%# $
;%%$ %
}&& 
if(( 
((( 
actions(( 
!=(( 
null(( 
)((  
{)) 
foreach** 
(** 
var** 
action** #
in**$ &
actions**' .
)**. /
{++ 
if,, 
(,, 
action,, 
is,, !
Action,," (
<,,( )
T,,) *
>,,* +
),,+ ,
{-- 
(.. 
(.. 
Action..  
<..  !
T..! "
>.." #
)..# $
action..$ *
)..* +
(..+ ,
args.., 0
)..0 1
;..1 2
}// 
}00 
}11 
}22 	
}33 
}44 Ÿ
LD:\Dev\AspNetCoreTestes\SharedKernel\Exceptions\FieldsValidationException.cs
	namespace 	
Domain
 
. 
SharedKernel 
. 

Exceptions (
{ 
[		 
Serializable		 
]		 
public

 

class

 %
FieldsValidationException

 *
:

+ ,
MeritusException

- =
{ 
public 
IList 
< 
FieldValidationInfo (
>( )
FieldsValidation* :
{; <
get= @
;@ A
privateB I
setJ M
;M N
}O P
public %
FieldsValidationException (
(( )
string) /
message0 7
)7 8
:9 :
base; ?
(? @
message@ G
)G H
{ 	
FieldsValidation 
= 
new "
List# '
<' (
FieldValidationInfo( ;
>; <
{ 
new 
FieldValidationInfo '
(' (
$str( *
,* +
message, 3
,3 4
false5 :
): ;
} 
; 
} 	
public %
FieldsValidationException (
(( )
string) /
message0 7
,7 8
IList9 >
<> ?
FieldValidationInfo? R
>R S
fieldsValidationT d
)d e
:f g
baseh l
(l m
messagem t
)t u
{ 	
this 
. 
FieldsValidation !
=" #
fieldsValidation$ 4
;4 5
} 	
public 
override 
string 
Message &
=>' )
GetErrorSummary* 9
(9 :
): ;
;; <
private 
string 
GetErrorSummary &
(& '
)' (
{ 	
StringBuilder 
sb 
= 
new "
StringBuilder# 0
(0 1
)1 2
;2 3
sb!! 
.!! 
Append!! 
(!! 
$str!! I
)!!I J
;!!J K
foreach## 
(## 
var## 
val## 
in## 
FieldsValidation## /
.##/ 0
Where##0 5
(##5 6
c##6 7
=>##8 :
!##; <
c##< =
.##= >
IsValid##> E
)##E F
)##F G
{$$ 
sb%% 
.%% 
Append%% 
(%% 
$"%% 
{%% 
val%%  
.%%  !
Field%%! &
}%%& '
 : %%' *
{%%* +
val%%+ .
.%%. /
Message%%/ 6
}%%6 7
\n%%7 9
"%%9 :
)%%: ;
;%%; <
}&& 
return'' 
sb'' 
.'' 
ToString'' 
('' 
)''  
;''  !
}(( 	
})) 
}** é
CD:\Dev\AspNetCoreTestes\SharedKernel\Exceptions\MeritusException.cs
	namespace 	
Domain
 
. 
SharedKernel 
. 

Exceptions (
{ 
public 

abstract 
class 
MeritusException *
:+ ,
	Exception- 6
{ 
public		 
MeritusException		 
(		  
)		  !
=>		" $
Logger		% +
.		+ ,
Log		, /
(		/ 0
Message		0 7
)		7 8
;		8 9
public 
MeritusException 
(  
string  &
message' .
). /
:0 1
base2 6
(6 7
message7 >
)> ?
{ 	
} 	
public 
MeritusException 
(  
string  &
message' .
,. /
	Exception0 9
innerException: H
)H I
:J K
baseL P
(P Q
messageQ X
,X Y
innerExceptionZ h
)h i
{ 	
} 	
	protected 
MeritusException "
(" #
SerializationInfo# 4
info5 9
,9 :
StreamingContext; K
contextL S
)S T
:U V
baseW [
([ \
info\ `
,` a
contextb i
)i j
{ 	
} 	
} 
} á	
DD:\Dev\AspNetCoreTestes\SharedKernel\Exceptions\NotFoundException.cs
	namespace 	
Domain
 
. 
SharedKernel 
. 

Exceptions (
{ 
[ 
Serializable 
] 
public 

class 
NotFoundException "
:# $
MeritusException% 5
{ 
public 
int 
Id 
{ 
get 
; 
private $
set% (
;( )
}* +
public

 
NotFoundException

  
(

  !
)

! "
{ 	
} 	
public 
NotFoundException  
(  !
int! $
id% '
)' (
{ 	
Id 
= 
id 
; 
} 	
public 
NotFoundException  
(  !
string! '
message( /
,/ 0
int1 4
id5 7
)7 8
:9 :
base; ?
(? @
message@ G
)G H
{ 	
Id 
= 
id 
; 
} 	
} 
} Ú
KD:\Dev\AspNetCoreTestes\SharedKernel\Exceptions\UserLoginFailedException.cs
	namespace 	
Domain
 
. 
SharedKernel 
. 

Exceptions (
{ 
[ 
Serializable 
] 
public 

class $
UserLoginFailedException )
:* +
MeritusException, <
{ 
public		 $
UserLoginFailedException		 '
(		' (
)		( )
{

 	
} 	
public $
UserLoginFailedException '
(' (
string( .
message/ 6
)6 7
:8 9
base: >
(> ?
message? F
)F G
{ 	
} 	
public $
UserLoginFailedException '
(' (
string( .
message/ 6
,6 7
	Exception8 A
innerExceptionB P
)P Q
:R S
baseT X
(X Y
messageY `
,` a
innerExceptionb p
)p q
{ 	
} 	
	protected $
UserLoginFailedException *
(* +
SerializationInfo+ <
info= A
,A B
StreamingContextC S
contextT [
)[ \
:] ^
base_ c
(c d
infod h
,h i
contextj q
)q r
{ 	
} 	
} 
} â
4D:\Dev\AspNetCoreTestes\SharedKernel\IDomainEvent.cs
	namespace 	
SharedKernel
 
{ 
public 

	interface 
IDomainEvent !
{ 
} 
}		 Ô
/D:\Dev\AspNetCoreTestes\SharedKernel\IHandle.cs
	namespace 	
SharedKernel
 
{ 
public 

	interface 
IHandle 
< 
in 
T  !
>! "
where# (
T) *
:+ ,
IDomainEvent- 9
{ 
void 
Handle 
( 
T 
args 
) 
; 
} 
} ˆ"
.D:\Dev\AspNetCoreTestes\SharedKernel\Logger.cs
	namespace 	
SharedKernel
 
{ 
public 

static 
class 
Logger 
{ 
private

 
static

 
readonly

 
NLog

  $
.

$ %
Logger

% +
_logger

, 3
;

3 4
static 
Logger 
( 
) 
{ 	
var 
config 
= 
new  
LoggingConfiguration 1
(1 2
)2 3
;3 4
var 
consoleTarget 
= 
new  # 
ColoredConsoleTarget$ 8
(8 9
)9 :
;: ;
config 
. 
	AddTarget 
( 
$str &
,& '
consoleTarget( 5
)5 6
;6 7
var 

fileTarget 
= 
new  

FileTarget! +
(+ ,
), -
;- .
config 
. 
	AddTarget 
( 
$str #
,# $

fileTarget% /
)/ 0
;0 1
consoleTarget 
. 
Layout  
=! "
$str# T
;T U

fileTarget 
. 
FileName 
=  !
$str" 7
;7 8

fileTarget 
. 
Layout 
= 
$str  Q
;Q R

fileTarget 
. 
ArchiveFileName &
=' (
$str) A
;A B

fileTarget 
. 
ArchiveEvery #
=$ %
FileArchivePeriod& 7
.7 8
Day8 ;
;; <

fileTarget   
.   
ArchiveNumbering   '
=  ( ) 
ArchiveNumberingMode  * >
.  > ?
Date  ? C
;  C D

fileTarget!! 
.!! 
MaxArchiveFiles!! &
=!!' (
$num!!) *
;!!* +

fileTarget"" 
."" 
KeepFileOpen"" #
=""$ %
false""& +
;""+ ,

fileTarget## 
.## 
ConcurrentWrites## '
=##( )
true##* .
;##. /
var'' 
rule1'' 
='' 
new'' 
LoggingRule'' '
(''' (
$str''( +
,''+ ,
LogLevel''- 5
.''5 6
Trace''6 ;
,''; <
consoleTarget''= J
)''J K
;''K L
config(( 
.(( 
LoggingRules(( 
.((  
Add((  #
(((# $
rule1(($ )
)(() *
;((* +
var** 
rule2** 
=** 
new** 
LoggingRule** '
(**' (
$str**( +
,**+ ,
LogLevel**- 5
.**5 6
Trace**6 ;
,**; <

fileTarget**= G
)**G H
;**H I
config++ 
.++ 
LoggingRules++ 
.++  
Add++  #
(++# $
rule2++$ )
)++) *
;++* +

LogManager.. 
... 
Configuration.. $
=..% &
config..' -
;..- .
_logger00 
=00 

LogManager00  
.00  !
	GetLogger00! *
(00* +
$str00+ B
)00B C
;00C D
};; 	
public== 
static== 
void== 
Fatal==  
(==  !
string==! '
msg==( +
)==+ ,
{>> 	
_logger?? 
.?? 
Fatal?? 
(?? 
msg?? 
)?? 
;?? 
}@@ 	
publicBB 
staticBB 
voidBB 
LogBB 
(BB 
stringBB %
msgBB& )
)BB) *
{CC 	
_loggerDD 
.DD 
DebugDD 
(DD 
msgDD 
)DD 
;DD 
}EE 	
publicGG 
staticGG 
voidGG 
TraceGG  
(GG  !
stringGG! '
msgGG( +
)GG+ ,
{HH 	
_loggerII 
.II 
TraceII 
(II 
msgII 
)II 
;II 
}JJ 	
}KK 
}LL ¿
@D:\Dev\AspNetCoreTestes\SharedKernel\Queries\PaginatedResults.cs
	namespace 	
Domain
 
. 
SharedKernel 
. 
Queries %
{ 
public 

sealed 
class 
PaginatedResults (
<( )
T) *
>* +
where, 1
T2 3
:3 4
class4 9
{ 
public 
int 
TotalRecords 
{  !
get" %
;% &
private' .
set/ 2
;2 3
}4 5
public		 
int		 
CurrentPage		 
{		  
get		! $
;		$ %
private		& -
set		. 1
;		1 2
}		3 4
public

 
int

 

TotalPages

 
{

 
get

  #
;

# $
private

% ,
set

- 0
;

0 1
}

2 3
public 
int 
RecordsPerPage !
{" #
get$ '
;' (
private) 0
set1 4
;4 5
}6 7
public 
IList 
< 
T 
> 
Results 
{  !
get" %
;% &
private' .
set/ 2
;2 3
}4 5
public 
PaginatedResults 
(  
IList  %
<% &
T& '
>' (
results) 0
,0 1
int2 5
totalRecords6 B
,B C
intD G
currentPageH S
,S T
intU X
recordsPerPageY g
)g h
{ 	
Results 
= 
results 
; 
CurrentPage 
= 
currentPage %
;% &
TotalRecords 
= 
totalRecords '
;' (
RecordsPerPage 
= 
recordsPerPage +
;+ ,

TotalPages 
= 
( 
int 
) 
Math "
." #
Ceiling# *
(* +
(+ ,
double, 2
)2 3
TotalRecords3 ?
/@ A
RecordsPerPageB P
)P Q
;Q R
} 	
} 
} à
?D:\Dev\AspNetCoreTestes\SharedKernel\Queries\PaginationInput.cs
	namespace 	
Domain
 
. 
SharedKernel 
. 
Queries %
{ 
public 

sealed 
class 
PaginationInput '
{ 
public 
PaginationInput 
( 
int "
currentPage# .
,. /
int0 3
recordsPerPage4 B
)B C
{ 	
new		 
Guard		 
(		 
)		 
.

 
GreaterThan

 
(

 
$str

 *
,

* +
currentPage

, 7
,

7 8
$num

9 :
)

: ;
. 
GreaterThan 
( 
$str -
,- .
recordsPerPage/ =
,= >
$num? @
)@ A
. 
Validate 
( 
) 
; 
CurrentPage 
= 
currentPage %
;% &
RecordsPerPage 
= 
recordsPerPage +
;+ ,
} 	
public 
int 
CurrentPage 
{  
get! $
;$ %
private& -
set. 1
;1 2
}3 4
public 
int 
RecordsPerPage !
{" #
get$ '
;' (
private) 0
set1 4
;4 5
}6 7
public 
int 
RecordsToSkip  
=>! #
($ %
CurrentPage% 0
-1 2
$num3 4
)4 5
*6 7
RecordsPerPage8 F
;F G
} 
} ž"
6D:\Dev\AspNetCoreTestes\SharedKernel\Utils\Comparer.cs
	namespace 	
Domain
 
. 
SharedKernel 
. 
Utils #
{ 
public 
static 
class 
Comparer 
{		 
public 
static 
bool 

TryCompare %
(% &
IComparable& 1
value2 7
,7 8
IComparable9 D
valueToCompareE S
,S T
outU X
intY \
result] c
)c d
{ 	
try 
{ 
Compare 
( 
value 
, 
valueToCompare -
,- .
out/ 2
result3 9
)9 :
;: ;
return 
true 
; 
} 
catch 
{ 
result 
= 
$num 
; 
} 
return 
false 
; 
} 	
static&& 
void&& 
Compare&& 
(&& 
IComparable&& '
value&&( -
,&&- .
IComparable&&/ :
valueToCompare&&; I
,&&I J
out&&K N
int&&O R
result&&S Y
)&&Y Z
{'' 	
try(( 
{)) 
result++ 
=++ 
value++ 
.++ 
	CompareTo++ (
(++( )
valueToCompare++) 7
)++7 8
;++8 9
},, 
catch-- 
(-- 
ArgumentException-- $
)--$ %
{.. 
if00 
(00 
value00 
is00 
decimal00 $
||00% '
valueToCompare00( 6
is007 9
decimal00: A
||00B D
value11 
is11 
double11 #
||11$ &
valueToCompare11' 5
is116 8
double119 ?
||11@ B
value22 
is22 
float22 "
||22# %
valueToCompare22& 4
is225 7
float228 =
)22= >
{33 
result55 
=55 
Convert55 $
.55$ %
ToDouble55% -
(55- .
value55. 3
)553 4
.554 5
	CompareTo555 >
(55> ?
Convert55? F
.55F G
ToDouble55G O
(55O P
valueToCompare55P ^
)55^ _
)55_ `
;55` a
}66 
else77 
{88 
result:: 
=:: 
(:: 
(:: 
long:: #
)::# $
value::$ )
)::) *
.::* +
	CompareTo::+ 4
(::4 5
(::5 6
long::6 :
)::: ;
valueToCompare::; I
)::I J
;::J K
};; 
}<< 
}== 	
publicCC 
staticCC 
intCC 
GetComparisonResultCC -
(CC- .
IComparableCC. 9
valueCC: ?
,CC? @
IComparableCCA L
valueToCompareCCM [
)CC[ \
{DD 	
ifEE 
(EE 

TryCompareEE 
(EE 
valueEE  
,EE  !
valueToCompareEE" 0
,EE0 1
outEE2 5
intEE6 9
resultEE: @
)EE@ A
)EEA B
{FF 
returnGG 
resultGG 
;GG 
}HH 
returnJJ 
valueJJ 
.JJ 
	CompareToJJ "
(JJ" #
valueToCompareJJ# 1
)JJ1 2
;JJ2 3
}KK 	
publicQQ 
staticQQ 
boolQQ 
GetEqualsResultQQ *
(QQ* +
IComparableQQ+ 6
valueQQ7 <
,QQ< =
IComparableQQ> I
valueToCompareQQJ X
)QQX Y
{RR 	
ifSS 
(SS 

TryCompareSS 
(SS 
valueSS  
,SS  !
valueToCompareSS" 0
,SS0 1
outSS2 5
intSS6 9
resultSS: @
)SS@ A
)SSA B
{TT 
returnUU 
resultUU 
==UU  
$numUU! "
;UU" #
}VV 
returnXX 
valueXX 
.XX 
EqualsXX 
(XX  
valueToCompareXX  .
)XX. /
;XX/ 0
}YY 	
}ZZ 
}[[ þ0
<D:\Dev\AspNetCoreTestes\SharedKernel\Utils\PasswordHasher.cs
	namespace 	
Domain
 
. 
SharedKernel 
. 
Utils #
{ 
public 

sealed 
class 
PasswordHasher &
{ 
private 
const 
int 
SaltSize "
=# $
$num% '
;' (
private 
const 
int 
HashSize "
=# $
$num% '
;' (
public 
static 
string 
Hash !
(! "
string" (
password) 1
,1 2
int3 6

iterations7 A
)A B
{ 	
byte 
[ 
] 
salt 
; 
new $
RNGCryptoServiceProvider (
(( )
)) *
.* +
GetBytes+ 3
(3 4
salt4 8
=9 :
new; >
byte? C
[C D
SaltSizeD L
]L M
)M N
;N O
var 
pbkdf2 
= 
new 
Rfc2898DeriveBytes /
(/ 0
password0 8
,8 9
salt: >
,> ?

iterations@ J
)J K
;K L
var   
hash   
=   
pbkdf2   
.   
GetBytes   &
(  & '
HashSize  ' /
)  / 0
;  0 1
var## 
	hashBytes## 
=## 
new## 
byte##  $
[##$ %
SaltSize##% -
+##. /
HashSize##0 8
]##8 9
;##9 :
Array$$ 
.$$ 
Copy$$ 
($$ 
salt$$ 
,$$ 
$num$$ 
,$$ 
	hashBytes$$  )
,$$) *
$num$$+ ,
,$$, -
SaltSize$$. 6
)$$6 7
;$$7 8
Array%% 
.%% 
Copy%% 
(%% 
hash%% 
,%% 
$num%% 
,%% 
	hashBytes%%  )
,%%) *
SaltSize%%+ 3
,%%3 4
HashSize%%5 =
)%%= >
;%%> ?
var(( 

base64Hash(( 
=(( 
Convert(( $
.(($ %
ToBase64String((% 3
(((3 4
	hashBytes((4 =
)((= >
;((> ?
return++ 
string++ 
.++ 
Format++  
(++  !
$str++! 6
,++6 7

iterations++8 B
,++B C

base64Hash++D N
)++N O
;++O P
},, 	
public22 
static22 
string22 
Hash22 !
(22! "
string22" (
password22) 1
)221 2
{33 	
return44 
Hash44 
(44 
password44  
,44  !
$num44" '
)44' (
;44( )
}55 	
public<< 
static<< 
bool<< 
IsHashSupported<< *
(<<* +
string<<+ 1

hashString<<2 <
)<<< =
{== 	
return>> 

hashString>> 
.>> 
Contains>> &
(>>& '
$str>>' 5
)>>5 6
;>>6 7
}?? 	
publicGG 
staticGG 
boolGG 
VerifyGG !
(GG! "
stringGG" (
passwordGG) 1
,GG1 2
stringGG3 9
hashedPasswordGG: H
)GGH I
{HH 	
ifJJ 
(JJ 
!JJ 
IsHashSupportedJJ  
(JJ  !
hashedPasswordJJ! /
)JJ/ 0
)JJ0 1
{KK 
throwLL 
newLL !
NotSupportedExceptionLL /
(LL/ 0
$strLL0 O
)LLO P
;LLP Q
}MM 
varPP 
splittedHashStringPP "
=PP# $
hashedPasswordPP% 3
.PP3 4
ReplacePP4 ;
(PP; <
$strPP< J
,PPJ K
$strPPL N
)PPN O
.PPO P
SplitPPP U
(PPU V
$charPPV Y
)PPY Z
;PPZ [
varQQ 

iterationsQQ 
=QQ 
intQQ  
.QQ  !
ParseQQ! &
(QQ& '
splittedHashStringQQ' 9
[QQ9 :
$numQQ: ;
]QQ; <
)QQ< =
;QQ= >
varRR 

base64HashRR 
=RR 
splittedHashStringRR /
[RR/ 0
$numRR0 1
]RR1 2
;RR2 3
varUU 
	hashBytesUU 
=UU 
ConvertUU #
.UU# $
FromBase64StringUU$ 4
(UU4 5

base64HashUU5 ?
)UU? @
;UU@ A
varXX 
saltXX 
=XX 
newXX 
byteXX 
[XX  
SaltSizeXX  (
]XX( )
;XX) *
ArrayYY 
.YY 
CopyYY 
(YY 
	hashBytesYY  
,YY  !
$numYY" #
,YY# $
saltYY% )
,YY) *
$numYY+ ,
,YY, -
SaltSizeYY. 6
)YY6 7
;YY7 8
var\\ 
pbkdf2\\ 
=\\ 
new\\ 
Rfc2898DeriveBytes\\ /
(\\/ 0
password\\0 8
,\\8 9
salt\\: >
,\\> ?

iterations\\@ J
)\\J K
;\\K L
byte]] 
[]] 
]]] 
hash]] 
=]] 
pbkdf2]]  
.]]  !
GetBytes]]! )
(]]) *
HashSize]]* 2
)]]2 3
;]]3 4
for`` 
(`` 
var`` 
i`` 
=`` 
$num`` 
;`` 
i`` 
<`` 
HashSize``  (
;``( )
i``* +
++``+ -
)``- .
{aa 
ifbb 
(bb 
	hashBytesbb 
[bb 
ibb 
+bb  !
SaltSizebb" *
]bb* +
!=bb, .
hashbb/ 3
[bb3 4
ibb4 5
]bb5 6
)bb6 7
{cc 
returndd 
falsedd  
;dd  !
}ee 
}ff 
returngg 
truegg 
;gg 
}hh 	
}ii 
}jj §

FD:\Dev\AspNetCoreTestes\SharedKernel\Validation\FieldValidationInfo.cs
	namespace 	
Domain
 
. 
SharedKernel 
. 

Validation (
{ 
public 

class 
FieldValidationInfo $
{ 
public 
string 
Field 
{ 
get !
;! "
private# *
set+ .
;. /
}0 1
public 
string 
Message 
{ 
get  #
;# $
private% ,
set- 0
;0 1
}2 3
public 
bool 
IsValid 
{ 
get !
;! "
private# *
set+ .
;. /
}0 1
public		 
FieldValidationInfo		 "
(		" #
string		# )
field		* /
,		/ 0
string		1 7
message		8 ?
,		? @
bool		A E
isValid		F M
)		M N
{

 	
Field 
= 
field 
; 
IsValid 
= 
isValid 
; 
Message 
= 
message 
; 
} 	
} 
} õJ
8D:\Dev\AspNetCoreTestes\SharedKernel\Validation\Guard.cs
	namespace 	
Domain
 
. 
SharedKernel 
. 

Validation (
{		 
public

 

class

 
Guard

 
{ 
private 
IList 
< 
FieldValidationInfo )
>) *
validations+ 6
;6 7
public 
Guard 
( 
) 
{ 	
validations 
= 
new 
List "
<" #
FieldValidationInfo# 6
>6 7
(7 8
)8 9
;9 :
} 	
public 
void 
Validate 
( 
string #
message$ +
=, -
$str. ?
)? @
{ 	
if 
( 
validations 
. 
Any 
(  
x  !
=>" $
!% &
x& '
.' (
IsValid( /
)/ 0
)0 1
throw 
new %
FieldsValidationException 3
(3 4
message4 ;
,; <
validations= H
.H I
WhereI N
(N O
cO P
=>Q S
!T U
cU V
.V W
IsValidW ^
)^ _
._ `
ToList` f
(f g
)g h
)h i
;i j
} 	
public 
Guard 
NotNull 
( 
string #
field$ )
,) *
object+ 1
obj2 5
)5 6
{ 	
if 
( 
obj 
== 
null 
) 
validations 
. 
Add 
(  
new  #
FieldValidationInfo$ 7
(7 8
field8 =
,= >
$"? A
O campo A I
{I J
fieldJ O
}O P
 Ã© obrigatÃ³rioP ^
"^ _
,_ `
falsea f
)f g
)g h
;h i
else 
validations 
. 
Add 
(  
ValidationOK  ,
(, -
)- .
). /
;/ 0
return   
this   
;   
}!! 	
public## 
Guard## 
NotNullOrEmpty## #
(### $
string##$ *
field##+ 0
,##0 1
string##2 8
value##9 >
)##> ?
{$$ 	
if%% 
(%% 
string%% 
.%% 
IsNullOrEmpty%% $
(%%$ %
value%%% *
)%%* +
)%%+ ,
validations&& 
.&& 
Add&& 
(&&  
new&&  #
FieldValidationInfo&&$ 7
(&&7 8
field&&8 =
,&&= >
$"&&? A
O campo &&A I
{&&I J
field&&J O
}&&O P 
 nÃ£o pode ser vazio&&P c
"&&c d
,&&d e
false&&f k
)&&k l
)&&l m
;&&m n
else'' 
validations(( 
.(( 
Add(( 
(((  
ValidationOK((  ,
(((, -
)((- .
)((. /
;((/ 0
return** 
this** 
;** 
}++ 	
public-- 
Guard-- 
GreaterThan--  
(--  !
string--! '
field--( -
,--- .
IComparable--/ :
number--; A
,--A B
IComparable--C N
greaterThanNumber--O `
)--` a
{.. 	
if// 
(// 
Comparer// 
.// 
GetComparisonResult// ,
(//, -
number//- 3
,//3 4
greaterThanNumber//5 F
)//F G
>//H I
$num//J K
)//K L
validations00 
.00 
Add00 
(00  
ValidationOK00  ,
(00, -
)00- .
)00. /
;00/ 0
else11 
validations22 
.22 
Add22 
(22  
new22  #
FieldValidationInfo22$ 7
(227 8
field228 =
,22= >
$"22? A
O campo 22A I
{22I J
field22J O
}22O P#
 deve ser maior do que 22P g
{22g h
greaterThanNumber22h y
}22y z
.22z {
"22{ |
,22| }
false	22~ ƒ
)
22ƒ „
)
22„ …
;
22… †
return44 
this44 
;44 
}66 	
public88 
Guard88 
LessThan88 
(88 
string88 $
field88% *
,88* +
IComparable88, 7
number888 >
,88> ?
IComparable88@ K
lessThanNumber88L Z
)88Z [
{99 	
if:: 
(:: 
Comparer:: 
.:: 
GetComparisonResult:: ,
(::, -
number::- 3
,::3 4
lessThanNumber::5 C
)::C D
<::E F
$num::G H
)::H I
validations;; 
.;; 
Add;; 
(;;  
ValidationOK;;  ,
(;;, -
);;- .
);;. /
;;;/ 0
else<< 
validations== 
.== 
Add== 
(==  
new==  #
FieldValidationInfo==$ 7
(==7 8
field==8 =
,=== >
$"==? A
O campo ==A I
{==I J
field==J O
}==O P#
 deve ser menor do que ==P g
{==g h
lessThanNumber==h v
}==v w
.==w x
"==x y
,==y z
false	=={ €
)
==€ 
)
== ‚
;
==‚ ƒ
return?? 
this?? 
;?? 
}AA 	
publicCC 
GuardCC 

ValidEmailCC 
(CC  
stringCC  &
fieldCC' ,
,CC, -
stringCC. 4
emailCC5 :
)CC: ;
{DD 	
stringEE 

expressionEE 
=EE 
$str	EE  ¯
;
EE¯ °
varGG 
regexGG 
=GG 
newGG 
RegexGG !
(GG! "

expressionGG" ,
,GG, -
RegexOptionsGG. :
.GG: ;

IgnoreCaseGG; E
)GGE F
;GGF G
ifII 
(II 
!II 
regexII 
.II 
IsMatchII 
(II 
emailII $
)II$ %
)II% &
validationsJJ 
.JJ 
AddJJ 
(JJ  
newJJ  #
FieldValidationInfoJJ$ 7
(JJ7 8
fieldJJ8 =
,JJ= >
$strJJ? V
,JJV W
falseJJX ]
)JJ] ^
)JJ^ _
;JJ_ `
elseKK 
validationsLL 
.LL 
AddLL 
(LL  
ValidationOKLL  ,
(LL, -
)LL- .
)LL. /
;LL/ 0
returnNN 
thisNN 
;NN 
}OO 	
publicQQ 
GuardQQ 
ValidPasswordQQ "
(QQ" #
stringQQ# )
fieldQQ* /
,QQ/ 0
stringQQ1 7
passwordQQ8 @
)QQ@ A
{RR 	
ifSS 
(SS 
stringSS 
.SS 
IsNullOrEmptySS $
(SS$ %
passwordSS% -
)SS- .
||SS/ 1
passwordSS2 :
.SS: ;
LengthSS; A
<SSB C
$numSSD E
)SSE F
validationsTT 
.TT 
AddTT 
(TT  
newTT  #
FieldValidationInfoTT$ 7
(TT7 8
fieldTT8 =
,TT= >
$strTT? g
,TTg h
falseTTi n
)TTn o
)TTo p
;TTp q
elseUU 
validationsVV 
.VV 
AddVV 
(VV  
ValidationOKVV  ,
(VV, -
)VV- .
)VV. /
;VV/ 0
returnXX 
thisXX 
;XX 
}YY 	
public[[ 
Guard[[ 
HasMoreThanOne[[ #
<[[# $
T[[$ %
>[[% &
([[& '
string[[' -
field[[. 3
,[[3 4
IList[[5 :
<[[: ;
T[[; <
>[[< =
lista[[> C
)[[C D
{\\ 	
if]] 
(]] 
lista]] 
==]] 
null]] 
||]] 
lista]]  %
.]]% &
Count]]& +
==]], .
$num]]/ 0
)]]0 1
validations^^ 
.^^ 
Add^^ 
(^^  
new^^  #
FieldValidationInfo^^$ 7
(^^7 8
field^^8 =
,^^= >
$"^^? A
A lista ^^A I
{^^I J
field^^J O
}^^O P"
 nÃ£o pode estar vazia^^P e
"^^e f
,^^f g
false^^h m
)^^m n
)^^n o
;^^o p
else__ 
validations`` 
.`` 
Add`` 
(``  
ValidationOK``  ,
(``, -
)``- .
)``. /
;``/ 0
returnbb 
thisbb 
;bb 
}cc 	
privateff 
FieldValidationInfoff #
ValidationOKff$ 0
(ff0 1
)ff1 2
{gg 	
returnhh 
newhh 
FieldValidationInfohh *
(hh* +
$strhh+ -
,hh- .
$strhh/ 1
,hh1 2
truehh3 7
)hh7 8
;hh8 9
}ii 	
}kk 
}ll 